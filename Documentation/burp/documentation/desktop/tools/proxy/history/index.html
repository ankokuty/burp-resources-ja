<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../../../../../../assets/ps/styles/psselfservice.css">
<cms page-layout="FREESTYLE"></cms>
</head>
<body class="section theme-white wrapper-themed">
<section class="container ps-breadcrumbs">
    <ol class="breadcrumb-list">
        <li>
            <a href="https://portswigger.net/support">サポートセンタ</a>
        </li>
        <li>
            <a href="../../../../index.html">ドキュメント</a>
        </li>
        <li>
            <a href="../../../index.html">デスクトップ版</a>
        </li>
        <li>
            <a href="../../index.html">ツール</a>
        </li>
        <li>
            <a href="../index.html">Proxy</a>
        </li>
        <li>
            <a href="index.html">履歴</a>
        </li>
    </ol>
</section>
<section class="container labels-editions-wrapper">
    <label class="label-edition is-professional">Professional</label>
    <label class="label-edition is-community">Community</label>
</section>
<h1>Burp Proxy 履歴</h1>
<p>
    Proxy履歴は、Proxyを通過したすべてのメッセージの<a href="#history-table">完全な記録</a>を保持します。この情報の整理をするために、<a href="#proxy-history-display-filter">フィルタ</a>や<a href="#proxy-history-annotations">注釈付け</a>ができ、Proxy履歴で<a href="#proxy-history-testing-workflow">テストワークフロー</a>を推進できます。
</p>
<p>
    Proxy履歴は、<a href="../intercept.html#controls">インターセプトがオフ</a>になっていても常に更新され、インターセプトせずにアプリケーション通信を監視しながら、詳細を参照できます。
</p>
<div class="highlightedarea">
    <h4>クイックスタートガイド</h4>
    <ul>
        <li>
            <a href="getting-started-http-history.html">Burp ProxyのHTTP履歴入門</a>
        </li>
        <li>
            <a href="getting-started-websockets-history.html">Burp ProxyのWebSocket履歴入門</a>
        </li>
    </ul>
</div>
<h2 id="history-table">履歴一覧</h2>
<p>
    HTTPとWebSocketメッセージは、個別の履歴一覧で表示されます。各一覧は、Proxyを通過したメッセージの完全な詳細と、<a href="../intercept.html">インターセプト</a>したメッセージに対して行った変更を表示します。
</p>
<p>
    HTTP履歴一覧には、次の列があります:
</p>
<ul>
    <li>
        リクエストのインデックス番号
    </li>
    <li>
        プロトコルとサーバのホスト名
    </li>
    <li>
        HTTPメソッド
    </li>
    <li>
        URLのファイルパスとクエリーストリング
    </li>
    <li>
        リクエストにパラメータが含まれているかどうかのフラグ
    </li>
    <li>
        リクエストまたはレスポンスがユーザによって変更されたかどうかのフラグ
    </li>
    <li>
        レスポンスのHTTPステータスコード
    </li>
    <li>
        レスポンスのバイト長
    </li>
    <li>
        レスポンスのMIMEタイプ
    </li>
    <li>
        URLのファイル拡張子
    </li>
    <li>
        (HTMLレスポンスの)ページタイトル
    </li>
    <li>
        ユーザが付けた<a href="#proxy-history-annotations">コメント</a>
    </li>
    <li>
        TLSを使用しているかどうかのフラグ
    </li>
    <li>
        宛先サーバのIPアドレス
    </li>
    <li>
        レスポンスで設定されたcookie
    </li>
    <li>
        リクエストが行われた時刻
    </li>
    <li>
        リクエストを受信した<a href="../options/index.html#binding">リスナーポート</a>
    </li>
</ul>
<p>
    WebSocket履歴一覧には、次の列があります:
</p>
<ul>
    <li>
        リクエストのインデックス番号
    </li>
    <li>
        WebSocket接続のURL
    </li>
    <li>
        メッセージの方向(送信または受信)
    </li>
    <li>
        メッセージがユーザによって変更されたかどうかのフラグ
    </li>
    <li>
        レスポンスのバイト長
    </li>
    <li>
        ユーザが付けた<a href="#proxy-history-annotations">コメント</a>
    </li>
    <li>
        TLSを使用しているかどうかのフラグ
    </li>
    <li>
        メッセージを受信した時刻
    </li>
    <li>
        メッセージを受信した<a href="../options/index.html#binding">リスナーポート</a>
    </li>
</ul>
<p>
    任意の列ヘッダをクリックすると、一覧内のコンテンツを並び替えられます(ヘッダをクリックすると、昇順、降順、ソートなしを循環します)。たとえば、最新のアイテムが履歴一覧のトップに来るよう、"上方"にリストが延びるのが好きな場合は、リクエスト番号列を降順に並べ替えます。
</p>
<p>
    一覧の列をドラッグすると、列の順序を変更できます。これは特定の列が常に表示されるようにしたい場合に便利です。
</p>
<p>
    一覧から1つのアイテムを選択すると、その(HTTPまたはWebSocketメッセージ)アイテムに関連するメッセージが下部ペインに表示されます。<a href="../intercept.html">ユーザのインターセプト</a>や<a href="../options/index.html#response-modification">レスポンスの自動変更</a>や<a href="../options/index.html#match-and-replace">検索と置換</a>によってメッセージが変更されている場合、変更された各メッセージが個別に表示されます。下部ペインには、各メッセージごとの<a href="../../../functions/message-editor/index.html">メッセージエディタ</a>があり、詳細に分析できます。
</p>
<p>
    さらにメインの履歴ビューでは、以下も可能です:
</p>
<ul>
    <li>
        一覧のアイテムをダブルクリックしてポップアップウィンドウにアイテムを表示する。
    </li>
    <li>
        <a href="#proxy-history-testing-workflow">コンテキストメニュー</a>から新たな履歴ウィンドウを開き、独自の<a href="#proxy-history-display-filter">ディスプレイフィルタ</a>を設定する
    </li>
</ul>
<h2 id="proxy-history-display-filter">Proxy履歴のディスプレイフィルタ</h2>
<p>
    履歴一覧それぞれに、コンテンツの一部を非表示にするディスプレイフィルタがあり、興味のあるコンテンツの分析作業をしやすくします
</p>
<p>
    履歴一覧の上のフィルタバーには、現在のディスプレイフィルタについて説明があります。フィルタバーをクリックすると、編集用にフィルタオプションが開きます。
</p>
<p>
    HTTP履歴フィルタは、次の属性に基づいて設定できます:
</p>
<ul>
    <li>
        <strong>リクエストタイプ</strong> - <a href="../../target/scope.html">スコープ内</a>のアイテムのみ、レスポンスがあったアイテムのみ、パラメータ付きのリクエストのみを表示できます。
    </li>
    <li>
        <strong>MIMEタイプ</strong> - HTML、CSS、画像など、さまざまなMIMEタイプのレスポンスを、表示または非表示にするかどうか設定できます。
    </li>
    <li>
        <strong>ステータスコード</strong> - さまざまなHTTPステータスコードで表示または非表示を設定できます。
    </li>
    <li>
        <label class="label-edition is-professional">Professional</label>
        <strong>検索語</strong> - 指定された検索語がレスポンスに含まれている、または含まれていないかによってフィルタできます。検索語は、リテラル文字列または正規表現で設定でき、大文字小文字を区別するかどうかも設定できます。<strong>一致しないものを検索</strong>オプションを選択すると、検索語が存在しないアイテムのみにマッチします。
    </li>
    <li>
        <strong>ファイル拡張子</strong> - 指定したファイル拡張子でアイテムの表示または非表示を設定できます。
    </li>
    <li>
        <strong>注釈</strong> - ユーザが指定した<a href="#proxy-history-annotations">コメントや色付け</a>があるアイテムだけを表示するよう設定できます。
    </li>
    <li>
        <strong>リスナー</strong> - 指定した <a href="../options/index.html#binding">リッスンポート</a>で受け取ったアイテムのみ表示します。これは<a href="#proxy-history-testing-workflow">アクセス制御のテスト</a>に便利です。
    </li>
</ul>
<p>
    WebSocket履歴フィルタは、次の属性に基づいて設定できます:
</p>
<ul>
    <li>
        <strong>リクエストタイプ</strong> - <a href="../../target/scope.html">スコープ内</a>のアイテム(WebSocket接続のURLに基づく)のみ受信する、あるいは受信または送信メッセージのみを表示できます。
    </li>
    <li>
        <label class="label-edition is-professional">Professional</label>
        <strong>検索語</strong> - 指定された検索語がメッセージに含まれている、または含まれていないかによってフィルタできます。検索語は、リテラル文字列または正規表現で設定でき、大文字小文字を区別するかどうかも設定できます。<strong>一致しないものを検索</strong>オプションを選択すると、検索語が存在しないアイテムのみにマッチします。
    </li>
    <li>
        <strong>注釈</strong> - ユーザが指定した<a href="#proxy-history-annotations">コメントや色付け</a>があるアイテムだけを表示するよう設定できます。
    </li>
    <li>
        <strong>リスナー</strong> - 指定した <a href="../options/index.html#binding">リッスンポート</a>で受け取ったアイテムのみ表示します。これは<a href="#proxy-history-testing-workflow">アクセス制御のテスト</a>に便利です。
    </li>
</ul>
<p>
    Proxy履歴に表示されるコンテンツは、データベースを元にした効果的なビューで、ディスプレイフィルタはビューへの表示内容を制御します。一部のアイテムを隠すようフィルタをセットすると、それらは非表示になるだけで削除されるわけではなく、関連するフィルタを解除すれば再度表示されます。異なる種類の特徴的なリクエストが現れる巨大なProxy履歴を体系的に調べるために、フィルタが助けになります。
</p>
<h2 id="proxy-history-annotations">Proxy履歴の注釈</h2>
<p>
    コメントや色付けの追加で、Proxy履歴のアイテムに注釈を付けられます。いろいろなアイテムの用途を書いておき、後で深掘りするアイテムにフラグを立てるのに便利です。
</p>
<p>
    色付けは、2つの方法で追加できます:
</p>
<ul>
    <li>
        一番左の列のドロップダウンメニューを使用して、個々のアイテムを色付けできます。
    </li>
    <li>
        コンテキストメニューの<strong>色付け</strong>を使用して、1つまたは複数の選択されたアイテムに色付けできます。
    </li>
</ul>
<p>
    コメントは、2つの方法で追加できます。
</p>
<ul>
    <li>
        該当するエントリのコメント列をダブルクリックし、その場で追加または編集できます。
    </li>
    <li>
        コンテキストメニューの<strong>コメントを追加</strong>を使用して、選択された1 つ以上のアイテムにコメントできます。
    </li>
</ul>
<p>
    <a href="../intercept.html">インターセプトタブ</a>に表示されているアイテムにも注釈を付けられ、これらは自動的に履歴一覧にも表示されます。
</p>
<p>
    気になるアイテムに注釈を付けている場合、列のソートと<a href="#proxy-history-display-filter">ディスプレイフィルタ</a>を使ってこれらのアイテムを後で素早く検索できます。
</p>
<h2 id="proxy-history-testing-workflow">Proxy履歴のテストワークフロー</h2>
<p>
    Proxyを通過するすべてのメッセージの詳細を表示するだけでなく、コンテキストメニューを使用して、特定の攻撃を制御や開始できます。表示される履歴の種類に応じて、次のオプションが利用可能です:
</p>
<h4>スコープに追加/削除</h4>
<p>
    選択したアイテムをスコープに追加または削除する<a href="../../target/scope.html">ターゲットスコープ</a>ルールを作成します。
</p>
<h4>スキャン / ...に送信</h4>
<p>
    任意のアイテムを他のBurpツールに送信し、さらなる攻撃や分析が実行できます。ツール間でリクエストを送信する機能は、Burpの<a href="../../../penetration-testing/index.html">ユーザ主導ワークフロー</a>の中核をなします。
</p>
<h4>レスポンスをブラウザで表示</h4>
<p>
    選択したレスポンスをBurpブラウザ内でレンダリングさせることで、Burpの内蔵<a href="../../../functions/message-editor/index.html#render-tab">HTMLレンダラ</a>の制限を回避します。このオプションを選択すると、Burpブラウザにペーストできる一意なURLが生成され、レスポンスがレンダリングされます。その結果、ブラウザのリクエストがBurpによって処理され(リクエストは元のWebサーバには送信されません)、選択したレスポンスを正確に返し、最初にリクエストされたURLのコンテキストでブラウザがレスポンスを処理します。したがって、レスポンス内の相対リンクは、Burpブラウザによって正しく処理されます。その結果、ブラウザはレスポンスのレンダリングの課程で追加のリクエスト(画像やCSSなど)を行う場合があり、これらはBurpの通常の方法で処理されます。
</p>
<h4>ブラウザでリクエスト</h4>
<p>
    選択したリクエストをBurpブラウザで再送信できます。次のサブオプションがあります:
</p>
<ul>
    <li>
        <strong>元のセッションを使う</strong> - 元のリクエストにあるCookieヘッダを正確に使ったリクエストを発行します。
    </li>
    <li>
        <strong>現在のブラウザのセッションを使う</strong> -&nbsp;ブラウザによって提供されたcookieを使ったリクエストをBurpが発行します。あるユーザコンテキスト(管理者など)で生成されたリクエストを選択し、現在ログインしている別のユーザコンテキスト(一般ユーザなど)でリクエストを再送するなど、容易にアクセス制御のテストをしたい場合にこの機能が便利です。複雑な多段階プロセスを扱っているとき、多段階のプロセスでcookieを何度も繰り返しProxyで修正するより、手動で一連のURLをBurpからブラウザに貼り付ける方が簡単です。
    </li>
</ul>
<h4>関連ツール</h4>
<p>
    <label class="label-edition is-professional">Professional</label>
    このサブメニューには、関連するタスクを実行するさまざまな便利な機能があります:
</p>
<ul>
    <li>
        <strong><a href="../../../functions/search.html#find-references">リファレンス検索</a></strong> - 選択したアイテムにリンクしているHTTPレスポンスを、すべてのBurpツールから探し出せます。
    </li>
    <li>
        <strong><a href="../../../functions/content-discovery.html">コンテンツ探索</a></strong> - 巡回もしくはSpiderで表示されているコンテンツからはリンクされていない、コンテンツや機能を探索できます。
    </li>
    <li>
        <strong><a href="../../../functions/task-scheduler.html">スケジュールタスク</a></strong> - 指定した時間や間隔で自動的に実行するタスクを作成できます。
    </li>
    <li>
        <strong><a href="../../../functions/generate-csrf-poc.html">CSRF PoCジェネレータ</a></strong> - ブラウザで表示したとき、選択したリクエストが発行されるHTMLを作成できます。
    </li>
</ul>
<h4>新規履歴ウィンドウを表示</h4>
<p>
    新たなウィンドウで、Proxy履歴の新たなビューを開きます。状況によっては、基になる履歴データに対して複数のビューを表示して、それぞれで異なるフィルタを適用すると便利です。たとえば、アクセス制御のテストをする際、異なるユーザコンテキストでアプリケーションにログインし、各ユーザコンテキストで発生したリクエストの異なるシーケンスを個別に確認したいことがあります。各ユーザコンテキストで異なるブラウザを使い、各ブラウザ用に異なる<a href="../options/index.html#proxy-listeners">Proxyリスナー</a>を作ると実現できます。(対応するリスナーを使うよう各ブラウザの<a href="../../../external-browser-config/index.html">プロキシ設定</a>を更新する必要があります。)各ブラウザ用に、別々のProxy履歴ウィンドウを開き、関連するProxyリスナーポートからのリクエストだけを表示するように<a href="#proxy-history-display-filter">ディスプレイフィルタ</a>を設定します。各ブラウザでアプリケーションを使用すると、各履歴ウィンドウには関連するユーザコンテキストのアイテムだけが表示されます。次に、(コンテキストメニューから)<strong>現在のブラウザセッションでリクエスト</strong>機能を使用すると、ブラウザ間でリクエストを切り替え、ブラウザのユーザコンテキストでどのように処理されるか判断できます。
</p>
<h4>コメントを追加</h4>
<p>
    選択したアイテムにコメントを追加できます。詳細は、<a href="#proxy-history-annotations">注釈</a>を参照してください。
</p>
<h4>色付け</h4>
<p>
    選択したアイテムに色付けできます。詳細は、<a href="#proxy-history-annotations">注釈</a>を参照してください。
</p>
<h4>アイテムを削除</h4>
<p>
    選択したアイテムを完全に削除します。
</p>
<h4>URLをコピー</h4>
<p>
    選択したアイテムのURLをクリップボードにコピーします。
</p>
<h4>curlコマンドをコピー</h4>
<p>
    選択したリクエストを生成するcurlコマンドをクリップボードにコピーします。
</p>
<h4>リンクをコピー</h4>
<p>
    選択したアイテムのリンクを分析し、クリップボードにコピーします。
</p>
<h4>アイテムを保存</h4>
<p>
    完全なリクエスト、レスポンス、レスポンス長、HTTPステータスコード、MIMEタイプなどすべての関連するメタデータを含む、選択したアイテムに関するデータを、指定したファイルにXMLフォーマットで保存します。
</p>
</body>
</html>