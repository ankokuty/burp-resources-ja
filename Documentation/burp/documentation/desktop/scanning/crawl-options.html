<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../../../../assets/ps/styles/psselfservice.css">
<cms page-layout="FREESTYLE"></cms>
</head>
<body class="section theme-white wrapper-themed">
<section class="container ps-breadcrumbs">
    <ol class="breadcrumb-list">
        <li>
            <a href="https://portswigger.net/support">サポートセンタ</a>
        </li>
        <li>
            <a href="../../index.html">ドキュメント</a>
        </li>
        <li>
            <a href="../index.html">デスクトップ版</a>
        </li>
        <li>
            <a href="index.html">Webサイトのスキャン</a>
        </li>
        <li>
            <a href="crawl-options.html">クロールオプション</a>
        </li>
    </ol>
</section>
<section class="container labels-editions-wrapper">
    <label class="label-edition is-professional">Professional</label>
</section>
<h1>クロールオプション</h1>
<p>
    クロールベースのスキャン中のBurp Scannerの挙動を設定する多数のオプションがあります。これらは<a href="../scanning/scan-launcher.html">スキャン開始時</a>にその場で設定でき、またBurpの<a href="../configurations.html#configuration-library">設定ライブラリ</a>でも管理できます。
</p>
<div class="highlightedarea">
    <h4>注</h4>
    <p>
        Burp Suiteの設定ライブラリには<a href="built-in-configurations.html">組み込み設定</a>が用意されているので、これらのオプションを素早く設定できます。
    </p>
</div>
<h2 id="crawl-optimization">クロールの最適化</h2>
<p>
    これらの設定は、クロールの目的とアプリケーションの性質を反映するためにクロールロジックの動作を制御します。
</p>
<h3 id="maximum-link-depth">最大リンク深度</h3>
<p>
    最大リンク深度とは、クローラによる開始URLから作成されるナビゲーション遷移(リンクのクリックやフォームの送信)の最大回数です。最近のアプリケーションは、メニューやページフッターのような場所で、すべてのレスポンスに大量のナビゲーションを構築する傾向があります。このため通常は、開始URLから少数のホップで、アプリケーションの大部分のコンテンツと機能に到達できます。アイテムの表示、ショッピングカートへの追加、チェックアウトなど、多段階のプロセスを完全に網羅するには、さらに多くのホップが必要です。
</p>
<p>
    一部のアプリケーションでは、非常に長いナビゲーションシーケンスが含まれていても、興味深い違いのある機能ではない場合があります。たとえばショッピングアプリケーションでは、膨大な数の商品カテゴリ、サブカテゴリ、表示フィルタがある場合があります。クローラにとってこれはリンクの非常に深いネストされたツリーとして表示され、すべて異なるコンテンツを返します。このような場合、ナビゲーション構造の深くまで入り込むことにほとんど意味がないため、最大リンク深度を8など小さな数に制限するのが適当です。
</p>
<h3 id="crawl-strategy">クロール戦略</h3>
<p>
    現実世界のアプリケーションは、コンテンツやナビゲーションの構成方法、レスポンスの揮発性、アプリケーション状態の種類や複雑さの点で、まったく異なっています。極端な例では、アプリケーションはそれぞれの異なる機能について固有で安定したURLを使い、各レスポンスで固定のコンテンツを返し、サーバ側の状態が含まれません。逆の極端な例では、機能にアクセスする都度変化する短命なURLを使い、異なる機能への異なるナビゲーション経路でアクセスするとURLが頻繁に変化し、非確定に変わる揮発性のコンテンツを返し、ユーザの操作によってその後に観察される内容や動作が変化する重度のステートフルな機能などを使用しています。
</p>
<p>
    Burpのクローラは、これらの両極端を処理できます。必要に応じて、<a href="../../scanner/crawling.html#core-approach">短命で頻繁に変化するURL</a>、<a href="../../scanner/crawling.html#crawling-volatile-content">揮発性のコンテンツ</a>、<a href="../../scanner/crawling.html#detecting-changes-in-application-state">アプリケーション状態の変化</a>を処理できます。ただし、これらのケースを完全に処理すると、クロール作業に大幅な負荷が発生します。クロール戦略の設定を使用して、指定したアプリケーションに適用されるアプローチを調整できます。実際にこの設定は、クロールの速度と達成される網羅性とのトレードオフになります。デフォルトの戦略は、一般的なアプリケーションで網羅性と速度のバランスが取れています。より安定してユニークなURLを使っていて、ステートフルな機能がないアプリケーションをクロールする場合は、より速度を最適化した戦略を選択できます。あるいは、より揮発的で頻繁に変わるURLや、複雑なステートフル機能のアプリケーションをクロールする場合は、より網羅性を最適化した戦略も選択できます。
</p>
<h4 id="fastest-crawl-strategy">"Fastest(最速)"クローリング戦略</h4>
<p>
    Burp Scannerの"Fastest(最速)"クロール戦略は、一部の重要な点が他の戦略とは異なることに注意してください。
</p>
<ul>
    <li>
        クローラは、対象アプリケーションの状態をリセットして再現しようとしません。ルートディレクトリからパスをナビゲートするのではなく、ページを直接リクエストします。
    </li>
    <li>
        他の戦略とは異なり、クローラは<a href="../options/sessions/index.html#cookie-jar">cookie jar</a>のcookieを初期値として使用します。認証後のページをクロールしたい場合は、事前にBurpのブラウザを使ってアプリケーションの認証を行っておく必要があります。認証されていない状態でクロールしたい場合は、クロールの前にアプリケーションからログアウトしてください。
    </li>
    <li>
        クローラは、新しいユーザを登録しようとしません。
    </li>
    <li>
        認証は、特別なフェーズとしてではなく、潜在的なログインフォームを最初に発見したときに行われます。認証情報が提供された場合は、最初の組み合わせのみが使用されます。
    </li>
</ul>
<h2 id="crawl-limits">クロール制限</h2>
<p>
    最新アプリケーションのクロールは、ステートフルな機能、不安定なコンテンツ、無制限のナビゲーションのおかげで、終わらない場合があります。Burpのクローラはさまざまな手法を使用して、クロールの初期段階でユニークなコンテンツを最大限発見しようとします。クロール制限の設定では、クロールの効果が限界に達したとき、クロール範囲に制限がかけられます。一般的に、スキャンされるアプリケーションに関する知識に基づいて、クロール範囲の制限を設定するのが妥当です。
</p>
<p>
    以下に基づいてクロールを制限できます:
</p>
<ul>
    <li>
        かかった時間。
    </li>
    <li>
        発見されたユニークな位置の数。位置とは、選択された<a href="#crawl-strategy">クロール戦略</a>に基づく、コンテンツまたは機能の固有なユニットです。
    </li>
    <li>
        生成したリクエスト数。
    </li>
</ul>
<h2 id="login-functions">ログイン機能</h2>
<p>
    これらの設定は、クロール中に検出されたログイン機能に対するクローラの処理方法を制御します。クローラが次のことを行う必要があるかどうかを設定できます:
</p>
<ul>
    <li>
        対象Webサイトに新規ユーザを自動的に登録しようとします - これにより、クロール前に手動でユーザアカウントを登録する必要がなくなります。必要に応じてスキャンランチャの設定で、有効な<a href="../scanning/scan-launcher.html#application-login-options">アプリケーションログイン</a>を指定できます。
    </li>
    <li>
        無効なユーザ名を使用して意図的にログイン失敗を起こす - これは、無効な認証情報が送信された場合にのみアクセスされるアカウント回復機能に到達するのに役立ちます。クローラは、<a href="../scanning/scan-launcher.html#application-login-options">アプリケーションログイン</a>で指定したユーザ名に対して、意図的に無効なパスワードは送信しないことに注意してください。これらのアカウントでアカウントロック機能が発動しないようにするためです。
    </li>
</ul>
<div class="highlightedarea">
    <h4>注</h4>
    <p>
        これらの設定は、<a href="scan-launcher.html#use-recorded-login-sequences">記録されたログインシーケンス</a>とは互換性がありません。記録されたログインをスキャンに使用する場合、これらの設定は無視されます。
    </p>
</div>
<h3 id="how-does-the-crawler-identify-login-and-registration-forms">クローラはログインフォームと登録フォームをどのように識別するのか？</h3>
<p>
    クローラは、次のチェックリストを使用して、ターゲットサイトのログインフォームと登録フォームを識別します。
</p>
<ul>
    <li>
        フォームが標準のHTMLフォームであること。
    </li>
    <li>
        <code>type=password</code>属性の入力フィールドが含まれていること。
    </li>
    <li>
        空ではない<code>name</code>属性がパスワードフィールドにあること。
    </li>
</ul>
<p>
    これらの基準がすべて満たされると、クローラは次のルールを順番に適用して、登録フォームとログインフォームを区別します。たとえば、2つのフォームに同じ数のパスワードフィールドがある場合、テキストフィールドの数などを比較します。
</p>
<p>
    登録フォームには、これらが多く含まれます:
</p>
<ol>
    <li>
        パスワードフィールド
    </li>
    <li>
        テキストフィールド
    </li>
    <li>
        複数値の選択フィールド
    </li>
    <li>
        単一値の選択フィールド
    </li>
    <li>
        これらのすべてに合致する場合、最初に見つかったフォームのいずれかが登録フォームであるとみなします。
    </li>
</ol>
<h3 id="why-is-the-crawler-not-filling-my-login-forms">クローラがログインフォームに入力してくれないのはなぜか？</h3>
<p>
    クローラは、パスワードフィールドによってログインフォームと登録フォームを識別します。ただし、関連するフィールドが次の場合にのみ、ユーザ名またはメールアドレスを入力します。
</p>
<ul>
    <li>
        <code>type=email</code>または<code>type=text</code>のフィールドがある
    </li>
    <li>
        空ではない<code>name</code>属性がある
    </li>
</ul>
<p>
    これらのいずれかの条件を満たさない場合クローラは、フォームであることは認識しますが、対応するデータを正しく入力できません。
</p>
<h2 id="handling-application-errors-during-crawl">クロール中のアプリケーションエラーの処理</h2>
<p>
    これらの設定はBurp Scannerの、スキャンのクロールフェーズで発生する<a href="../../scanner/auditing.html#handling-application-errors">アプリケーションエラーの処理</a>方法 (接続失敗や送信タイムアウト)を制御します。
</p>
<p>
    次のオプションを設定できます:
</p>
<ul>
    <li>
        タスクを一時停止するまでの、連続してタイムアウトしたリクエスト数、またはタイムアウトしたリクエスト全体の割合。
    </li>
    <li>
        タイムアウトしたリクエストを再試行するために、追加確認する回数。
    </li>
</ul>
<p>
    空白のままにしておくと、無効にできます。
</p>
<h2 id="miscellaneous-crawl-settings">その他クロール設定</h2>
<p>
    クロールの詳細をカスタマイズできます:
</p>
<ul>
    <li>
        <strong>フォームを送信する</strong> - フォームを送信するかどうか設定します。
    </li>
    <li>
        <strong>User-Agentのカスタマイズ</strong> - カスタムのUser-Agentヘッダを指定できます。
    </li>
    <li>
        <strong>robotsファイルをリクエスト</strong> - <code>robots.txt</code>ファイルを取得し、そこからリンクを抽出するか制御します。
    </li>
    <li>
        <strong>サイトマップをリクエスト</strong> - <code>sitemap.xml</code>ファイルを取得し、そこからリンクを抽出するか制御します。抽出するアイテムの最大数を設定できます。
    </li>
    <li>
        <strong>コメントやリンクに隠れたリンクをたどる</strong> - HTMLコメントやJavaScriptを分析し、ページ内に表示されないURLを抽出するか制御します。抽出するアイテムの最大数を設定できます。
    </li>
    <li>
        <strong>API定義を分析する</strong> - クローラが検出したAPI定義を分析し、スキャンする可能性のあるエンドポイントを特定するかどうか制御します。詳細は、<a href="api-scanning.html">APIスキャン</a>ドキュメントを参照してください。
    </li>
    <li>
        <strong>アプリケーションがルーティングにフラグメントを使用</strong> - シングルページアプリケーション(Single-page applications,SPA)では、クライアントサイドのルーティングにURLフラグメントをよく使用します。これにより、ブラウザがサーバに追加のリクエストを送信せずに、複数の異なるページがあるように表示ができます。Burp Scannerが効果的にクロールするためには、対象のアプリケーションがこのような方法でフラグメントを使用しているかどうかを知る必要があります。デフォルトでは、フラグメントに次の文字が含まれている場合、クローラはクライアントサイドのルーティングにフラグメントが使用されていると判断します: <code>/ \ ? = &amp;.</code>。ただし、この設定で手動で制御も可能です。
    </li>
</ul>
<h3 id="embedded-browser-options">内蔵ブラウザオプション</h3>
<p>
    Burp Scannerの<a href="../functions/embedded-browser.html">内蔵Chromiumブラウザ</a>の動作を制御します。
</p>
<ul>
    <li>
        <p>
            <strong>クロールと診断に内蔵ブラウザを使用する</strong> - この設定は、Burp Scannerが対象サイトのナビゲートに内蔵ブラウザを使用するかどうかを制御します。これを<a href="browser-powered.html">ブラウザを利用したスキャン</a>と呼びます。
        </p>
        <p>
            デフォルトでは、マシンが必要な要件を満たしていると思われる場合、Burp Scannerは内蔵ブラウザを使用しますが、必要に応じて常にブラウザを使用するようにも強制できます。少なくとも<strong>2つのCPUコアと8GBのRAM</strong>を搭載したマシンの使用を推奨します。または、ブラウザによるスキャンの完全な無効化もできます。この場合、Burp Scannerは従来のクロールエンジンを使用します。
        </p>
    </li>
    <li>
        <p>
            <strong>スコープ外のホストから必要なリソースとデータを読み込む</strong> - この設定は、必要に応じてクローラがスコープ外のホストにリクエストを発行するかどうかを制御します。Webサイトが正しく機能するために、外部でホストされているサブリソースの読み込みや、APIからのデータ取得が必要なことがよくあります。これらのリクエストを許可すると、スキャンの対象範囲を最大化できます。クローラが行ったスコープ外のリクエストは、診断されないことに注意してください。
        </p>
    </li>
    <li>
        <p>
            <strong>サイトリソースの読込タイムアウト</strong> - この設定は、Burp Scannerがクロール中にサブリソースを読み込もうとしたとき、待機する時間をミリ秒単位で指定します。
        </p>
    </li>
    <li>
        <p>
            <strong>ブラウザ画面を表示してクロールする</strong> - デフォルトで、Burp Scannerはヘッドレスブラウザを使用してクロールを行います。この設定を有効にすると、スキャンが開始されたとき、内蔵ブラウザのウィンドウが新しく開き、クローラが対象Webサイトをナビゲートする様子がリアルタイムで見えます。これはトラブルシューティングに役立ちます。
        </p>
    </li>
</ul>
<div class="highlightedarea">
    <h4>注</h4>
    <p>
        画面を表示したブラウザのクロールを監視していると、Burp Scannerが複数のウィンドウを開き、既存のウィンドウが使用できなくなることがあります。これは予想される挙動で、スキャンに問題があるわけではありません。冗長なウィンドウは、一定時間後に自動的に閉じられます。
    </p>
</div>
</body>
</html>