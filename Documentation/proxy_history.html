<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/ps.css">
</head>
<body>
<section class="container ps-breadcrumbs">
    <ol itemscope itemtype="http://schema.org/BreadcrumbList">
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="https://support.portswigger.net/">
            <span itemprop="name">サポートセンター</span>
            <meta itemprop="position" content="1"/>
            </a>
        </li>
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="index.html">
            <span itemprop="name">ドキュメント</span>
            <meta itemprop="position" content="2"/>
            </a>
        </li>
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="proxy.html">
            <span itemprop="name">Proxy</span>
            <meta itemprop="position" content="3"/>
            </a>
        </li>
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="proxy_history.html">
            <span itemprop="name">履歴</span>
            <meta itemprop="position" content="4"/>
            </a>
        </li>
    </ol>
</section>
<section class="maincontainer">
    <div class="container main">
        <h1>Burp Proxy 履歴</h1>
        <p>
            Proxy履歴は、Proxyを通過した全てのメッセージの<a href="#table">完全な記録</a>を保持します。この情報の整理をするために、<a href="#filter">フィルター</a>や<a href="#annotations">注釈付け</a>ができ、Proxy履歴で<a href="#workflow">テストワークフロー</a>を推進できます。
        </p>
        <p>
            Proxy履歴は、<a href="proxy_intercept.html#controls">インターセプトがオフ</a>になっていても常に更新され、インターセプトせずにアプリケーション通信の監視しながら、詳細を参照できます。
        </p>
        <a name="table"></a>
        <h2>履歴一覧</h2>
        <p>
            HTTPおよびWebsocketメッセージが、個別の履歴一覧で表示されます。各一覧は、Proxyを通過したメッセージの完全な詳細と、<a href="proxy_intercept.html">インターセプト</a>したメッセージに対して行った変更を表示します。
        </p>
        <p>
            HTTPの履歴一覧には、次の列があります:
        </p>
        <ul>
            <li>
                リクエストのインデックス番号
            </li>
            <li>
                プロトコルとサーバーのホスト名
            </li>
            <li>
                HTTPメソッド
            </li>
            <li>
                URLのファイルパスとクエリーストリング
            </li>
            <li>
                リクエストにパラメーターが含まれているかどうかのフラグ
            </li>
            <li>
                リクエストまたはレスポンスがユーザーによって変更されたかどうかのフラグ
            </li>
            <li>
                レスポンスのHTTPステータスコード
            </li>
            <li>
                レスポンスのバイト長
            </li>
            <li>
                レスポンスのMIMEタイプ
            </li>
            <li>
                URLのファイル拡張子
            </li>
            <li>
                (HTMLレスポンスの)ページタイトル
            </li>
            <li>
                ユーザーが付けた<a href="#annotations">コメント</a>
            </li>
            <li>
                SSLを使用しているかどうかのフラグ
            </li>
            <li>
                宛先サーバーのIPアドレス
            </li>
            <li>
                レスポンスで設定されたcookie
            </li>
            <li>
                リクエストが行われた時刻
            </li>
            <li>
                リクエストを受信した<a href="proxy_options.html#listeners_binding">リスナーポート</a>
            </li>
        </ul>
        <p>
            WebSocketの履歴一覧には、次の列があります:
        </p>
        <ul>
            <li>
                リクエストのインデックス番号
            </li>
            <li>
                WebSocket接続のURL
            </li>
            <li>
                メッセージの方向(送信または受信)
            </li>
            <li>
                メッセージがユーザーによって変更されたかどうかのフラグ
            </li>
            <li>
                レスポンスのバイト長
            </li>
            <li>
                ユーザーが付けた<a href="#annotations">コメント</a>
            </li>
            <li>
                SSLを使用しているかどうかのフラグ
            </li>
            <li>
                メッセージを受信した時刻
            </li>
            <li>
                メッセージを受信した<a href="proxy_options.html#listeners_binding">リスナーポート</a>
            </li>
        </ul>
        <p>
            任意の列ヘッダーをクリックすると、一覧内のコンテンツの並び替えができます(ヘッダーをクリックすると、昇順・降順・ソートなしを循環します)。例えば、最新のアイテムが履歴一覧のトップに来るよう、"上方"にリストが延びるのが好きな場合は、リクエスト番号列を降順に並べ替えます。
        </p>
        <p>
            一覧の列をドラッグすると、列の順序を変更できます。これは特定の列が常に表示されるようにしたい場合に便利です。
        </p>
        <p>
            一覧から１つのアイテムを選択すると、その(HTTPまたはWebSocketメッセージ)アイテムに関連するメッセージが下部ペインに表示されます。<a href="proxy_intercept.html">ユーザーのインターセプト</a>、<a href="proxy_options.html#respmod">レスポンスの自動変更</a>、<a href="proxy_options.html#matchreplace">検索と置換</a>によってメッセージが変更されている場合、変更された各メッセージが個別に表示されます。下部ペインには、各メッセージごとの<a href="suite_functions_messageeditor.html">メッセージエディター</a>があり、詳細な分析ができます。
        </p>
        <p>
            さらにメインの履歴ビューでは、以下も可能です:
        </p>
        <ul>
            <li>
                一覧のアイテムをダブルクリックしてポップアップウィンドウにアイテムを表示する。
            </li>
            <li>
                <a href="#workflow">コンテキストメニュー</a>から新たな履歴ウィンドウを開き、独自の<a href="#filter">ディスプレイフィルター</a>を設定する
            </li>
        </ul>
        <a name="filter"></a>
        <h2>ディスプレイフィルター</h2>
        <p>
            履歴一覧それぞれに、コンテンツの一部を非表示にするディスプレイフィルターがあり、興味のあるコンテンツの分析作業をしやすくします
        </p>
        <p>
            履歴一覧の上のフィルターバーには、現在のディスプレイフィルターについて説明があります。フィルターバーをクリックすると、編集用にフィルターオプションが開きます。
        </p>
        <p>
            HTTP履歴フィルターは、次の属性に基づいて設定できます:
        </p>
        <ul>
            <li>
                <strong>リクエストタイプ</strong> - <a href="target_scope.html">スコープ内</a>のアイテムのみ、レスポンスがあったアイテムのみ、パラメーター付きのリクエストのみを表示できます。
            </li>
            <li>
                <strong>MIMEタイプ</strong> - HTML、CSS、画像など、様々なMIMEタイプのレスポンスを、表示または非表示にするかどうか設定できます。
            </li>
            <li>
                <strong>ステータスコード</strong> - 様々なHTTPステータスコードで表示または非表示を設定できます。
            </li>
            <li>
                <span class="pro-edition-feature-label">プロフェッショナル版</span> <strong>検索語</strong> - 指定された検索語がレスポンスに含まれている、または含まれていないかによってフィルターできます。検索語は、リテラル文字列または正規表現で設定でき、大文字小文字を区別するかどうかも設定できます。"一致しないものを検索"オプションを選択すると、検索語が存在しないアイテムのみにマッチします。
            </li>
            <li>
                <strong>ファイル拡張子</strong> - 指定したファイル拡張子でアイテムの表示または非表示を設定できます。
            </li>
            <li>
                <strong>注釈</strong> - ユーザーが指定した<a href="#annotations">コメントや色付け</a>があるアイテムだけを表示するよう設定できます。
            </li>
            <li>
                <strong>リスナー</strong> - 指定した <a href="proxy_options.html#listeners_binding">リッスンポート</a>で受け取ったアイテムのみ表示します。これは<a href="#workflow">アクセス制御のテスト</a>に便利です。
            </li>
        </ul>
        <p>
            WebSocket履歴フィルターは、次の属性に基づいて設定できます:
        </p>
        <ul>
            <li>
                <strong>リクエストタイプ</strong> - <a href="target_scope.html">スコープ内</a>のアイテム(WebSocket接続のURLに基づく)のみ、受信または送信メッセージのみを表示できます。
            </li>
            <li>
                <span class="pro-edition-feature-label">プロフェッショナル版</span> <strong>検索語</strong> - 指定された検索語がメッセージに含まれている、または含まれていないかによってフィルターできます。検索語は、リテラル文字列または正規表現で設定でき、大文字小文字を区別するかどうかも設定できます。"一致しないものを検索"オプションを選択すると、検索語が存在しないアイテムのみにマッチします。
            </li>
            <li>
                <strong>注釈</strong> - ユーザーが指定した<a href="#annotations">コメントや色付け</a>があるアイテムだけを表示するよう設定できます。
            </li>
            <li>
                <strong>リスナー</strong> - 指定した <a href="proxy_options.html#listeners_binding">リッスンポート</a>で受け取ったアイテムのみ表示します。これは<a href="#workflow">アクセス制御のテスト</a>に便利です。
            </li>
        </ul>
        <p>
            Proxy履歴に表示されるコンテンツは、データベースを元にした効果的なビューで、ディスプレイフィルターはビューへの表示内容を制御します。一部のアイテムを隠すようフィルターをセットすると、それらは非表示になるだけで削除されるわけではなく、関連するフィルターを解除すれば再度表示されます。異なる種類の特徴的なリクエストが現れる巨大なProxy履歴を体系的に調べるために、フィルターが助けになります。
        </p>
        <a name="annotations"></a>
        <h2>注釈</h2>
        <p>
            コメントや色付けの追加で、Proxy履歴のアイテムに注釈を付けられます。いろいろなアイテムの用途を書いておき、後で深掘りするアイテムにフラグを立てるのに便利です。
        </p>
        <p>
            色付けは、2 つの方法で追加できます:
        </p>
        <ul>
            <li>
                一番左の列のドロップダウンメニューを使用して、個々のアイテムを色付けできます。
            </li>
            <li>
                コンテキストメニューの"色付け"を使用して、１つまたは複数の選択されたアイテムに色付けできます。
            </li>
        </ul>
        <p>
            コメントは、2 つの方法で追加できます。
        </p>
        <ul>
            <li>
                該当するエントリーのコメント列をダブルクリックし、その場で追加または編集できます。
            </li>
            <li>
                コンテキストメニューの"コメントを追加"を使用して、選択された1 つ以上のアイテムにコメントできます。
            </li>
        </ul>
        <p>
            <a href="proxy_intercept.html">インターセプトタブ</a>に表示されているアイテムにも注釈を付けられ、これらは自動的に履歴一覧にも表示されます。
        </p>
        <p>
            気になるアイテムに注釈を付けている場合、列のソートと<a href="#filter">ディスプレイフィルター</a>を使ってこれらのアイテムを後で素早く検索できます。
        </p>
        <a name="workflow"></a>
        <h2>テストワークフロー</h2>
        <p>
            Proxyを通過するすべてのメッセージの詳細を表示するだけでなく、コンテキストメニューを使用して、特定の攻撃の制御や開始ができます。表示される履歴の種類に応じて、次のオプションが利用可能です:
        </p>
        <ul>
            <li>
                <strong>スコープに追加/削除</strong> - 選択したアイテムをスコープに追加または削除する<a href="target_scope.html">ターゲットスコープ</a>ルールを作成します。
            </li>
            <li>
                <strong>スキャン/巡回/送信する ...</strong> - 任意のアイテムを他のBurpツールに送信し、さらなる攻撃や解析が実行できます。ツール間のリクエストの送信機能は、Burpの<a href="suite_usingburp.html">ユーザー主導ワークフロー</a>の中核をなします。&nbsp;
            </li>
            <li>
                <strong>レスポンスをブラウザで表示</strong> - 選択したレスポンスをブラウザ内でレンダリングさせ、Burpの組み込み<a href="suite_functions_messageeditor.html#tabs_render">HTMLレンダラ</a>の制限を回避します。(Burpのインスタンスをプロキシーに設定した)ブラウザにペーストできる一意なURLが生成され、レスポンスがレンダリングされます。その結果、ブラウザのリクエストはBurpによって処理され(リクエストは元のWebサーバーには送信されません)、選択したレスポンスを正確に返し、最初にリクエストされたURLのコンテキストでブラウザはレスポンスを処理します。したがって、レスポンス内の相対リンクは、ブラウザによって正しく処理されます。その結果、ブラウザはレスポンスのレンダリングの課程で追加のリクエスト(画像やCSSなど)を生成し、これらはBurpの通常の方法で処理されます。
            </li>
            <li>
                <strong>ブラウザでリクエスト</strong> - 選択したリクエストを(Burpのインスタンスをプロキシーに設定した)ブラウザで再送信できます。次のサブオプションがあります:
                <ul>
                    <li>
                        <strong>元のセッションを使う</strong> - 元のリクエストにあるCookieヘッダーを正確に使ったリクエストを発行します。
                    </li>
                    <li>
                        <strong>現在のブラウザのセッションを使う</strong> -&nbsp;ブラウザの持つcookieを使ったリクエストをBurpが発行します。あるユーザーコンテキスト(管理者など)で生成されたリクエストを選択し、現在ログインしている別のユーザーコンテキスト(一般ユーザーなど)でリクエストを再送する、アクセス制御のテストを容易にするためにこの機能が使えます。複雑な多段階プロセスを扱っているとき、多段階のプロセスを何度も繰り返しProxyでcookieを修正するより、手動で一連のURLをBurpからブラウザに貼り付ける方が簡単です。
                    </li>
                </ul>
            </li>
            <li>
                <span class="pro-edition-feature-label">プロフェッショナル版</span> <strong>関連ツール</strong> - このサブメニューには、関連するタスクを実行する様々な便利な機能があります。
                <ul>
                    <li>
                        <strong><a href="suite_functions_search.html#references">リファレンス検索</a></strong> - 選択したアイテムにリンクしているHTTPレスポンスを、全てのBurpツールから探し出せます。
                    </li>
                    <li>
                        <strong><a href="suite_functions_contentdiscovery.html">コンテンツ探索</a></strong> - 巡回もしくはSpiderで表示されているコンテンツからはリンクされていない、コンテンツや機能を探索できます。
                    </li>
                    <li>
                        <strong><a href="suite_functions_taskscheduler.html">スケジュールタスク</a></strong> - 指定した時間及び間隔で自動的に実行するタスクを作成できます。
                    </li>
                    <li>
                        <strong><a href="suite_functions_csrfpoc.html">CSRF PoCジェネレーター</a></strong> - ブラウザで表示したとき、選択したリクエストが発行されるHTMLを作成できます。
                    </li>
                </ul>
            </li>
            <li>
                <strong>新規履歴ウィンドウを表示</strong> - 新たなウィンドウで、Proxy履歴の新たなビューを開きます。状況によっては、基になる履歴データに対して複数のビューを表示して、それぞれで異なるフィルターを適用すると便利です。例えば、アクセス制御のテストをする際、異なるユーザーコンテキストでアプリケーションにログインし、各ユーザーコンテキストで発生したリクエストの異なるシーケンスを個別に確認したいことがあります。各ユーザーコンテキストで異なるブラウザを使い、各ブラウザ用に異なる<a href="proxy_options.html#listeners">Proxyリスナー</a>を作ると実現できます。(対応するリスナーを使うよう各ブラウザの<a href="suite_gettingstarted.html#browser">プロキシー設定</a>を更新する必要があります。)各ブラウザ用に、別々のProxy履歴ウィンドウを開き、<a href="#filter">ディスプレイフィルター</a>で関連するProxyリスナーポートからのリクエストだけを表示するように設定します。各ブラウザでアプリケーションを使用すると、各履歴ウィンドウには関連するユーザーコンテキストのアイテムだけが表示されます。次に、(コンテキストメニューから)"現在のブラウザセッションでリクエスト"機能を使用すると、ブラウザ間でリクエストを切り替え、ブラウザのユーザーコンテキストでどのように処理されるか判断できます。
            </li>
            <li>
                <strong>コメントを追加</strong> - 選択したアイテムにコメントを追加できます。詳細は、<a href="#annotations"> 注釈</a>を参照してください。
            </li>
            <li>
                <strong>色付け</strong> - 選択したアイテムを色付けします。詳細は、<a href="#annotations"> 注釈</a>を参照してください。
            </li>
            <li>
                <strong>アイテムを削除</strong> - 選択したアイテムを完全に削除します。
            </li>
            <li>
                <strong>URLをコピー</strong> - 選択したアイテムのURLをクリップボードにコピーします。
            </li>
            <li>
                <strong>curlコマンドをコピー</strong> - 選択したリクエストを生成するcurlコマンドをクリップボードにコピーします。
            </li>
            <li>
                <strong>リンクをコピー</strong> - 選択したアイテムのリンクを解析し、クリップボードにコピーします。
            </li>
            <li>
                <strong>アイテムを保存</strong> - 完全なリクエスト・レスポンス・レスポンス長・HTTPステータスコード・MIMEタイプなど全ての関連するメタデータを含む、選択したアイテムに関するデータを、指定したファイルにXMLフォーマットで保存します。
            </li>
        </ul>
    </div>
</section>
</body>
</html>